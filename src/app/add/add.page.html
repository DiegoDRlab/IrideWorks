<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Nuovo Cantiere</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
<form #worksiteForm="ngForm" (ngSubmit)="save()">
      <ion-item>
        <ion-label position="stacked">Nome</ion-label>
        <ion-input required [(ngModel)]="worksite.name" name="name"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Descrizione</ion-label>
        <ion-textarea [(ngModel)]="worksite.descriription" name="descriription"></ion-textarea>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Cliente</ion-label>
        <ion-input [(ngModel)]="worksite.customer" name="customer"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Indirizzo</ion-label>
        <ion-input [(ngModel)]="worksite.address" name="address"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Citt√†</ion-label>
        <ion-input [(ngModel)]="worksite.city" name="city"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Immagine</ion-label>
        <input type="file" accept="image/*" (change)="onImageSelected($event)" />
      </ion-item>
      <ion-item *ngIf="worksite.imageBase64">
  <ion-thumbnail slot="start">
    <img [src]="worksite.imageBase64">
  </ion-thumbnail>
  <ion-label>Anteprima immagine</ion-label>
</ion-item>
      <ion-item>
        <ion-label position="stacked">Data Inizio</ion-label>
        <ion-datetime presentation="date" [(ngModel)]="worksite.startDate" name="startDate"></ion-datetime>
      </ion-item>
      <!-- <ion-item>
        <ion-label position="stacked">Data Fine</ion-label>
        <ion-datetime presentation="date" [(ngModel)]="worksite.completedDate" name="completedDate"></ion-datetime>
      </ion-item> -->
      <ion-item>
        <ion-label position="stacked">Stato</ion-label>
        <ion-select [(ngModel)]="worksite.workstiteStatus" name="status">
          <ion-select-option *ngFor="let s of statuses" [value]="s">{{s}}</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Responsabile</ion-label>
        <ion-input [(ngModel)]="worksite.manager" name="manager"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Note</ion-label>
        <ion-textarea [(ngModel)]="worksite.notes" name="notes"></ion-textarea>
      </ion-item>
    <ion-button expand="block" type="submit" class="ion-margin-top">Salva</ion-button>
    </form>
    <ion-toast
    [isOpen]="isToastOpen"
    message="Cantiere aggiunto con successo"
    [duration]="3000"
    (didDismiss)="setOpen(false)"
  ></ion-toast>
</ion-content>